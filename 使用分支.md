# 使用场景
branch和trunk在并行开发的过程中如何感知对方，branch如何才能在开发过程中不会和trunk越走越远，导致最后无法合并？试想一下，如果在你开发branch的过程中，trunk中的某个类文件已经被删除了（这可能是另外一个家伙在另一个branch上开发了两周后才合并到trunk的），而你竟然在这个类文件上做了大量修改，试问你到最后合并回trunk的时候该有多蛋疼？解决这一问题的唯一手段是，branch要不停地和trunk保持同步，你要及时地知道trunk都做了什么修改，这些修改是否会影响你正在开发的新功能，如果需要，你必须及时调整branch的代码，使之能与trunk“兼容”。
 
那么如何让branch和trunk保持同步？合并，从trunk合并到branch，你没听错，是从trunk合并到branch。关于TortoiseSVN的合并，有几点需要注意：
TortoiseSVN的合并发生在本地，也即你的working copy中，你无需过多担心会对repository中的代码造成影响
不管是从trunk合并到branch还是最终从branch合并回trunk，在每次合并前最好先update，然后将本地的修改先全部commit，保护好现场，万一合并不理想随时都可以revert
合并完成后看是否能正确编译，然后测试验证，最后将合并后的改动提交到repository
 
下面我将step by step地演示如何一次完整的branching和merging，包括创建分支、分支开发、分支和主线同步，分支合并到主线的全过程，甚至包括如何在本地创建一个测试用的repository。

- # 创建branch  
在/trunk/MyProject目录上右键，依次选择"TortoiseSVN" -> "Branch/tag..."，在弹出窗口的"To URL"中填入分支的地址，在这里目标revision选择HEAD revision，如下图所示，添加log后点击ok分支便建立了。这个操作速度非常快，新建的branch在repository中其实只是一个指向trunk某个revision的软连接而已，并没有真的复制文件。（工程是OsgDemo，创建的分支的名称是根据OsgDemo的最后一次提交的版本号来的）。    
![](https://github.com/havenow/my-svn/blob/master/pic/1.png)

- # Check out分支
右键TestSVN目录选择"TortoiseSVN Update"即可将刚刚建立的分支下载回本地。    
进入/trunk/OsgDemo-branch-r37目录下你会发现其文件结构和/trunk/OsgDemo一模一样。

